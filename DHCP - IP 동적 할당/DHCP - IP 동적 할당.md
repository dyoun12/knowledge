---
date: 2025-02-27
tags:
  - Network
  - Protocol
---
# DHCP란?

> DHCP(Dynamic Host Configuration Protocol)는 네트워크에 연결된 장치(클라이언트)에게 자동으로 IP 주소 및 네트워크설정을 할당하는 프로토콜이다. **수동 설정 없이도 네트워크에 접속 가능**하게 해주며, **IP 주소를 동적으로 관리**할 수 있도록 한다.

# DHCP의 필요성

### ✅ **정적(수동) IP 할당의 문제점**

- **관리자의 수작업 필요** → 대규모 네트워크에서 비효율적
- **IP 충돌 발생 가능** → 같은 IP를 여러 장치에 설정할 위험
- **이동성이 부족** → 네트워크 환경이 바뀌면 IP 재설정 필요

### ✅ **DHCP의 장점**

- **자동 IP 할당** → 사용자가 직접 설정할 필요 없음
- **IP 주소 충돌 방지** → 중앙에서 관리하여 중복 방지
- **효율적인 IP 관리** → 사용되지 않는 IP는 회수 후 재사용 가능
- **유동적인 네트워크 환경 지원** → 이동 시에도 자동으로 재설정

---

# DHCP 작동 방식 (DORA 프로세스)

> DHCP는 **DORA(Discover → Offer → Request → Acknowledge) 과정**을 통해 IP를 할당한다.

### 1️⃣ **Discover (클라이언트 → 서버)**

- 클라이언트가 네트워크에 접속 시, **DHCP 서버를 찾기 위해 브로드캐스트 패킷 전송**
- "DHCP 서버 있으면 응답해줘!"

### 2️⃣ **Offer (서버 → 클라이언트)**

- DHCP 서버가 사용 가능한 **IP 주소와 설정 정보(서브넷 마스크, 게이트웨이, DNS 등)를 포함한 패킷 전송**
- "이 IP를 사용할 수 있어!"

### 3️⃣ **Request (클라이언트 → 서버)**

- 클라이언트가 특정 **IP를 요청하는 메시지 전송** (Offer 받은 IP 중 선택)
- "이 IP를 할당받고 싶어!"

### 4️⃣ **Acknowledge (서버 → 클라이언트)**

- DHCP 서버가 **IP 할당 승인 및 설정 완료**
- "OK, 이 IP는 네 거야!"

✅ **이 과정이 완료되면 클라이언트는 할당된 IP를 사용하여 네트워크에 접속**할 수 있음.

---

# DHCP 구성 요소

| 구성 요소         | 설명                                     |
| ------------- | -------------------------------------- |
| DHCP 서버       | IP 주소를 관리하고 클라이언트 할당하는 장치              |
| DHCP 클라이언트    | DHCP 서버로부터 IP 주소를 요청하는 장치              |
| DHCP 릴레이 에이전트 | DHCP 서버와 다른 네트워크에 있는 클라이언트 간의 중계 역할 수행 |
| IP 주소 풀       | DHCP 서버가 할당 가능한 IP 주소 목록               |

---

# DHCP 할당 방식

### 1️⃣ **동적 할당 (Dynamic Allocation)**

- DHCP 서버가 **유효 기간(Lease Time)을 설정하여 임시로 IP 주소를 할당**
- 사용 기한이 지나면 IP 주소 회수 후 다른 클라이언트에게 재할당
- **일반적인 네트워크 환경에서 가장 많이 사용됨**

### 2️⃣ **자동 할당 (Automatic Allocation)**

- 클라이언트에게 **한 번 할당된 IP 주소를 영구적으로 유지**
- 한 번 할당되면 이후에는 같은 장치에 같은 IP가 제공됨

### 3️⃣ **고정 할당 (Static Allocation / Manual Allocation)**

- **특정 MAC 주소에 특정 IP를 지정**하여 할당
- **서버, 프린터 등 IP 변경이 없어야 하는 장치에 사용**

---

# DHCP와 관련된 주요 개념

### ✅ **IP 주소 임대(Lease)**

- DHCP는 **IP를 영구적으로 할당하는 것이 아니라, 일정 기간(Lease Time) 동안만 임대**
- 임대 기간이 끝나면 클라이언트는 갱신(Renew) 요청을 보내거나 IP를 반환

### ✅ **DHCP 릴레이 에이전트(DHCP Relay Agent)**

- **다른 네트워크에 있는 클라이언트가 DHCP 서버에 접근할 수 있도록 중계하는 역할**
- 일반적으로 **라우터가 DHCP 릴레이 역할 수행**

---

# DHCP vs 정적 IP 할당 비교

| 방식        | DHCP (동적 할당)      | 정적 IP 할당 (수동)      |
| --------- | ----------------- | ------------------ |
| 설정 방식     | 자동                | 사용자가 직접 설정         |
| IP 충돌 가능성 | 없음                | 있음                 |
| 관리 효율성    | 높음 (대규모 네트워크에 적합) | 낮음 (소규모 네트워크에 적합)  |
| 적용 대상     | 일반 사용자, 기업 네트워크   | 서버, 네트워크 장비, 프린터 등 |

---

## DHCP의 한계 및 보완책

### ❌ **보안 취약점**
- **악의적인 DHCP 서버(DHCP 스푸핑 공격)** → 클라이언트가 가짜 서버에서 IP를 할당 받아 네트워크 장애 발생 가능
- **DHCP 패킷을 가로채는 공격(MITM, 중간자 공격)**

### ✅ **보완책**
- **DHCP Snooping**: 신뢰할 수 없는 포트에서 DHCP 서버 운영을 차단
- **정적 IP 할당 병행**: 중요한 서버 및 네트워크 장치는 정적 IP 사용
- **VLAN 활용**: DHCP 트래픽을 특정 VLAN으로 격리

---

## 9. DHCP가 사용되는 환경

✅ **기업 및 가정 네트워크** → 사용자 수가 많아 수동 설정이 어려운 경우  
✅ **공유기(Wi-Fi 라우터)** → 스마트폰, 노트북 등 다양한 장치 연결 시 자동 할당  
✅ **클라우드 환경** → 가상 머신(VM) 등의 네트워크 설정 자동화  
✅ **IoT 장치** → 다양한 디바이스가 네트워크에 연결될 때 자동 IP 할당


---
# 참고문헌

- 

---
# 연결문서

- 